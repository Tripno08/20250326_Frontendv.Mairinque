@tailwind base;
@tailwind components;
@tailwind utilities;

/* Estilos base para toda a aplicação */
@layer base {
  /* Variáveis de cores principais */
  :root {
    --primary-50: 240 249 255;
    --primary-100: 224 242 254;
    --primary-200: 186 230 253;
    --primary-300: 125 211 252;
    --primary-400: 56 189 248;
    --primary-500: 14 165 233;
    --primary-600: 2 132 199;
    --primary-700: 3 105 161;
    --primary-800: 7 89 133;
    --primary-900: 12 74 110;
    --primary-950: 8 47 73;

    --secondary-50: 245 243 255;
    --secondary-100: 237 233 254;
    --secondary-200: 221 214 254;
    --secondary-300: 196 181 253;
    --secondary-400: 167 139 250;
    --secondary-500: 139 92 246;
    --secondary-600: 124 58 237;
    --secondary-700: 109 40 217;
    --secondary-800: 91 33 182;
    --secondary-900: 76 29 149;
    --secondary-950: 46 16 101;

    --success-50: 240 253 244;
    --success-100: 220 252 231;
    --success-500: 34 197 94;
    --success-700: 21 128 61;

    --warning-50: 254 252 232;
    --warning-100: 254 249 195;
    --warning-500: 234 179 8;
    --warning-700: 161 98 7;

    --error-50: 254 242 242;
    --error-100: 254 226 226;
    --error-500: 239 68 68;
    --error-700: 185 28 28;

    --info-50: 239 246 255;
    --info-100: 219 234 254;
    --info-500: 59 130 246;
    --info-700: 29 78 216;

    --gray-50: 249 250 251;
    --gray-100: 243 244 246;
    --gray-200: 229 231 235;
    --gray-300: 209 213 219;
    --gray-400: 156 163 175;
    --gray-500: 107 114 128;
    --gray-600: 75 85 99;
    --gray-700: 55 65 81;
    --gray-800: 31 41 55;
    --gray-900: 17 24 39;
    --gray-950: 3 7 18;
  }

  /* Definir variáveis para o modo escuro */
  .dark {
    /* As variáveis de cor já estão configuradas no Tailwind */
  }

  /* ACESSIBILIDADE: Configuração para redução de movimento */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* ACESSIBILIDADE: Quando o usuário optou por redução de movimento */
  html[data-reduce-motion='true'] * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* ACESSIBILIDADE: Quando o usuário optou por alto contraste */
  html[data-high-contrast='true'] {
    --primary-500: 0 0 0;
    --primary-600: 0 0 0;
    --primary-700: 0 0 0;
    --secondary-500: 0 0 0;
    --secondary-600: 0 0 0;
    --secondary-700: 0 0 0;
    --gray-500: 0 0 0;
    --gray-600: 0 0 0;
    --gray-700: 0 0 0;

    /* Garantir que os textos tenham contraste adequado */
    --tw-text-opacity: 1;
  }

  /* ACESSIBILIDADE: Anel de foco acessível */
  :focus-visible {
    outline: 2px solid rgb(14 165 233 / 1);
    outline-offset: 2px;
  }

  /* ACESSIBILIDADE: Tamanhos de fonte alternativos */
  html[data-font-size='large'] {
    font-size: 112.5%; /* 1rem = 18px */
  }

  html[data-font-size='larger'] {
    font-size: 125%; /* 1rem = 20px */
  }

  /* Configurações de texto base */
  body {
    @apply text-gray-900 dark:text-gray-100;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Estilos para melhorar leitura e acessibilidade */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-medium tracking-tight text-gray-900 dark:text-white;
    scroll-margin-top: 100px;
  }

  p,
  ul,
  ol {
    @apply text-gray-700 dark:text-gray-300;
  }

  /* Garantir que os links tenham contraste e feedback visual adequados */
  a:not([class]) {
    @apply text-primary-600 dark:text-primary-400 underline decoration-from-font underline-offset-4 hover:text-primary-800 dark:hover:text-primary-300 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 rounded-sm;
  }
}

/* Componentes reutilizáveis com classes utilitárias */
@layer components {
  /* Botões acessíveis */
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors;
  }

  .btn-primary {
    @apply bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 dark:bg-primary-600 dark:hover:bg-primary-700;
  }

  .btn-secondary {
    @apply bg-secondary-600 text-white hover:bg-secondary-700 focus:ring-secondary-500 dark:bg-secondary-600 dark:hover:bg-secondary-700;
  }

  .btn-outline {
    @apply bg-transparent border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 focus:ring-primary-500;
  }

  .btn-danger {
    @apply bg-error-600 text-white hover:bg-error-700 focus:ring-error-500;
  }

  .btn-success {
    @apply bg-success-600 text-white hover:bg-success-700 focus:ring-success-500;
  }

  /* ACESSIBILIDADE: Variações de tamanho */
  .btn-sm {
    @apply px-3 py-1.5 text-xs;
  }

  .btn-lg {
    @apply px-5 py-2.5 text-base;
  }

  .btn-xl {
    @apply px-6 py-3 text-lg;
  }

  /* ACESSIBILIDADE: Estados desabilitados */
  .btn:disabled,
  .btn[aria-disabled='true'] {
    @apply opacity-50 cursor-not-allowed;
  }

  /* ACESSIBILIDADE: Conteúdo visível apenas para leitores de tela */
  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
    clip: rect(0, 0, 0, 0);
    clip-path: inset(50%);
  }

  /* Componente visível apenas quando tiver foco */
  .sr-only-focusable:not(:focus) {
    @apply sr-only;
  }

  /* Card padrão */
  .card {
    @apply bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm p-4 md:p-6;
  }

  /* Inputs acessíveis */
  .form-input {
    @apply block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-white bg-white dark:bg-gray-800 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm placeholder-gray-400 dark:placeholder-gray-500;
  }

  .form-checkbox {
    @apply h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-800;
  }

  .form-radio {
    @apply h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 dark:bg-gray-800;
  }

  .form-select {
    @apply block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm;
  }

  .form-error {
    @apply mt-1 text-sm text-red-600 dark:text-red-400;
  }

  .form-label {
    @apply block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1;
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-primary {
    @apply bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-300;
  }

  .badge-secondary {
    @apply bg-secondary-100 text-secondary-800 dark:bg-secondary-900/30 dark:text-secondary-300;
  }

  .badge-success {
    @apply bg-success-100 text-success-800 dark:bg-success-900/30 dark:text-success-300;
  }

  .badge-warning {
    @apply bg-warning-100 text-warning-800 dark:bg-warning-900/30 dark:text-warning-300;
  }

  .badge-danger {
    @apply bg-error-100 text-error-800 dark:bg-error-900/30 dark:text-error-300;
  }

  .badge-info {
    @apply bg-info-100 text-info-800 dark:bg-info-900/30 dark:text-info-300;
  }

  /* Alertas */
  .alert {
    @apply p-4 rounded-md border;
  }

  .alert-info {
    @apply bg-info-50 border-info-300 text-info-700 dark:bg-info-900/20 dark:border-info-800 dark:text-info-300;
  }

  .alert-success {
    @apply bg-success-50 border-success-300 text-success-700 dark:bg-success-900/20 dark:border-success-800 dark:text-success-300;
  }

  .alert-warning {
    @apply bg-warning-50 border-warning-300 text-warning-700 dark:bg-warning-900/20 dark:border-warning-800 dark:text-warning-300;
  }

  .alert-error {
    @apply bg-error-50 border-error-300 text-error-700 dark:bg-error-900/20 dark:border-error-800 dark:text-error-300;
  }
}

/* Adicionando utilidades personalizadas */
@layer utilities {
  /* Utilidades para acessibilidade */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-900;
  }

  .scrollbar-hide {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari and Opera */
  }

  /* Utilidades para animações que respeitam prefers-reduced-motion */
  .animate-fade-in {
    @apply transition-opacity duration-300 ease-in-out opacity-0 motion-reduce:transition-none;
    animation: fadeIn 0.3s ease-in-out forwards;
  }

  @keyframes fadeIn {
    to {
      opacity: 1;
    }
  }

  /* Utilidades para espaçamento e layout responsivos */
  .responsive-container {
    @apply w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .section-spacing {
    @apply py-8 md:py-12 lg:py-16;
  }

  /* Grids adaptativas que alteram número de colunas com base no viewport */
  .auto-grid {
    @apply grid gap-4 sm:gap-6;
    grid-template-columns: repeat(auto-fill, minmax(min(100%, 18rem), 1fr));
  }

  /* Formatos de texto acessíveis */
  .readable-text {
    @apply max-w-prose text-base leading-7;
  }

  /* Utilitários para lidar com texto truncado */
  .truncate-2 {
    @apply overflow-hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }

  .truncate-3 {
    @apply overflow-hidden;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
  }
}
